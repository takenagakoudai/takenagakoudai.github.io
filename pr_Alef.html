<!DOCTYPE html>
<html dir="ltr" lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=yes, maximum-scale=1.0, minimum-scale=1.0">
<title>subpage</title>
<meta name="keywords" content="">
<meta name="description" content="">
<link rel="stylesheet" href="style.css" type="text/css" media="screen">
<!--[if lt IE 9]>
<script src="js/html5.js"></script>
<script src="js/css3-mediaqueries.js"></script>
<![endif]-->
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
<script src="js/jquery1.7.2.min.js"></script>
<script src="js/script.js"></script>
</head>
<body>

<header id="header" role="banner">
	<div class="inner">
		<h1>Kyushu Univ, Faculty of Science, Department of Mathematics</h1>
		<h2><a href="index.html">Koudai Takenaga's HP</a></h2>
	</div>
</header>

<nav id="mainNav">
	<div class="inner">
		<a class="menu" id="menu"><span>MENU</span></a>
		<div class="panel">
			<ul>
				<li><a href="sub_univ.html"><strong>university</strong><span>大学での成果</span></a></li>
				<li><a href="sub_math.html"><strong>math and everydy</strong><span>数学と日常</span></a></li>
				<li><a href="sub_past.html"><strong>past paper</strong><span>過去問</span></a></li>
				<li><a href="sub_prob.html"><strong>problems</strong><span>その他問題集</span></a></li>
				<li><a href="sub_info.html"><strong>information</strong><span>情報</span></a></li>
				<li><a href="sub_othe.html"><strong>others</strong><span>その他</span></a>
					<ul class="sub-menu">
						<li><a href="https://www.skaji.org">Prof. Kaji's HP</a></li>
						<li><a href="https://ryokawai-github.github.io/website/">Mr. Kawai's HP</a></li>
					</ul>
				</li>
			</ul>
		</div>
	</div>
</nav>

<div id="wrapper">

	<div id="content2">
		<section>
			<article class="content2">
				<header>
					<h2 class="title first"><span>Computation of indices</span></h2>
				</header>
				<div class="post">
					This is a messy code, but it is written just for calculating each index.
					<h3>Source Code</h3>
<pre><code class="prettyprint linenums">#ラテンクロスのパズル　折り目設定
#組み合わせを検索
import numpy as np
from numpy import linalg as LA
import matplotlib.pyplot as plt

#ラテンクロスの折り目情報
#辺の存在位置情報
##1##
#234#
##5##
##6##

#立方体
A=[[1,1,2,1],[1,2,2,2],[1,3,2,3],[1,2,1,3],[2,2,2,3]]
#二重被覆多角形
B=[[[0,2,1,3,2],[1,1,2,0,6],[1,1,2,2,5],[2,2,3,3,4]],
   [[1,0,2,1,6],[1,2,2,1,5],[1,4,2,3,1],[2,3,3,2,4]]]
#四面体
C=[[[0,5/2,1/3,3,2],[1,2/3,2,0,6],[1,2,3/2,1,5],[3/2,1,2,0,6],[1,4,3/2,3,1],[3/2,3,2,2,3],[1,4,2,10/3,1],[5/2,3,3,8/3,4]],
   [[1,0,2,2/3,6],[1,0,3/2,1,6],[3/2,1,2,2,5],[1,2,3/2,3,3],[3/2,3,2,4,1],[8/3,3,3,5/2,4],[0,8/3,1/2,3,2],[1,10/3,2,4,1]],
   [[1,0,2,1/2,6],[1,0,5/3,1,6],[5/3,1,2,3/2,5],[7/3,2,3,3,4],[1,2,2,5/2,3],[2,5/2,3,3,4],[0,5/2,1,3,2],[3/2,4,2,11/3,1]],
   [[1,11/3,3/2,4,1],[0,3,1,5/2,2],[1,5/2,2,2,3],[0,3,2/3,2,2],[1,3/2,4/3,1,5],[4/3,1,2,0,6],[1,1/2,2,0,6],[2,3,3,5/2,4]]]
#五面体
D=[[[0,2,1/2,3,2],[1,1,2,0,6],[1,1,2,2,5],[3/2,3,2,2,3],[1,4,3/2,3,1],[1,4,2,7/2,1]],
   [[1,7/2,2,4,1],[1,2,3/2,3,3],[3/2,3,2,4,1],[1,2,2,1,5],[1,0,2,1,6],[5/2,3,3,2,4]],
   [[1,1,2,0,6],[0,3,1/2,2,2],[0,3,1,5/2,2],[1,5/2,2,2,3],[2,2,3,3,4],[1,7/2,2,4,1]],
   [[1,0,2,1,6],[0,3,1,2,2],[1,2,2,5/2,3],[2,5/2,3,3,4],[5/2,2,3,3,4],[1,4,2,7/2,1]]]
#八面体
E=[[[1,1/2,2,0,6],[0,3,1,2,2],[1,2,2,1,5],[1,3,2,2,3],[2,2,3,3,4],[1,4,2,7/2,1]],
   [[1,0,2,1/2,6],[1,1,2,2,5],[2,2,3,3,4],[1,2,2,3,3],[0,3,1,2,2],[1,7/2,2,4,1]],
   [[0,3,1/2,2,2],[1,1,3/2,0,6],[1,1,2,2,5],[1,3,2,2,3],[1,4,2,3,1],[2,3,3,2,4]],
   [[0,2,1,3,2],[1,3,2,4,1],[1,2,2,3,3],[1,2,2,1,5],[3/2,0,2,1,6],[5/2,2,3,3,4]]]

#交点の座標を保存する配列
LIST=[]
#一致する辺の数を保存する配列
LIST2=[]
#折り線の平均，分散，max-min
LIST3=[]
#折り線の端点を保存する配列
LIST4=[]
#角度情報
LIST_ang=[]
LIST_ang_2=[]
LIST5=[]
#直線の交点を求める関数　返り値は，交点なし: 0,0,0  交点あり: 1,x,y　一致：2,0,0
def Intersection(x1,y1,x2,y2,x3,y3,x4,y4):
    #R^2内での交点の座標を求める
    a1=y2-y1;b1=x1-x2;c1=x2*y1-x1*y2
    a2=y4-y3;b2=x3-x4;c2=x4*y3-x3*y4
    if a1*b2==a2*b1:
        #端点が全て一致するか否か
        if (x1==x3)and(y1==y3)and(x2==x4)and(y2==y4):
            return 2,0,0
        else:
            return 0,0,0
    else:
        #以下の(x,y)が交点の座標  微小誤差が出たため丸める
        x=round((b1*c2-b2*c1)/(a1*b2-a2*b1),7)
        y=round((a2*c1-a1*c2)/(a1*b2-a2*b1),7)
    #ラテンクロスの内部に制限する
    if ((0&lt;x&lt;=1)and(2&lt;y&lt;3))or((2&lt;=x&lt;3)and(2&lt;y&lt;3))or((1&lt;x&lt;2)and(0&lt;y&lt;4)):
        #制限のためにソート
        if x1&gt;x2:
            n=x1;x1=x2;x2=n
        if y1&gt;y2:
            n=y1;y1=y2;y2=n
        if x3&gt;x4:
            n=x3;x3=x4;x4=n
        if y3&gt;y4:
            n=y3;y3=y4;y4=n
        if ((x1&lt;=x&lt;=x2)and(x3&lt;=x&lt;=x4))or((y1&lt;=y&lt;=y2)and(y3&lt;=y&lt;=y4)):
            return 1,x,y
        else:
            return 0,0,0
    else:
        return 0,0,0

#交点の出力 LISTへのappend
def output_Intersection(X,Y,count):
    for i in range(len(X)):
        for j in range(len(Y)):
            n,x,y=Intersection(X[i][0],X[i][1],X[i][2],X[i][3],Y[j][0],Y[j][1],Y[j][2],Y[j][3])
            if n==1:
                #交点がある場合
                if ([x,y]in LIST[count])==False:
                    LIST[count].append([x,y])
#折り線の共有本数
def orime2(X,count,list):
    for i in range(len(X)):
        if (X[i]in LIST4[count])==False:
            LIST4[count].append(X[i])
        else:
            LIST2[count].append(1)
            list[X[i][4]-1]=list[X[i][4]-1]-1

#折り線の配置
def var(X,list):
    for i in range(len(X)):
        list[X[i][4]-1]=list[X[i][4]-1]+1

#角度条件
def ang(X,count):
    for i in range(len(X)):
        for j in range(len(LIST_ang[count])):
            L=LIST_ang[count][j]
            Xi=X[i]
            x1=[round(L[0]-Xi[0],5),round(L[1]-Xi[1],5)]
            x2=[round(L[0]-Xi[2],5),round(L[1]-Xi[3],5)]
            x3=[round(L[2]-Xi[0],5),round(L[3]-Xi[1],5)]
            x4=[round(L[2]-Xi[2],5),round(L[3]-Xi[3],5)]
            if (x1==[0,0]):
                u=np.array([Xi[2]-Xi[0],Xi[3]-Xi[1]])
                v=np.array([L[2]-L[0],L[3]-L[1]])
                w=np.inner(u,v)
                n=LA.norm(u)*LA.norm(v)
                c=w/n
                a=np.rad2deg(np.arccos(np.clip(c,-1.0,1.0)))
                if (a&gt;1)and(a&lt;90):
                    LIST_ang_2[count].append(a)
            elif(x2==[0,0]):
                u=np.array([Xi[0]-Xi[2],Xi[1]-Xi[3]])
                v=np.array([L[2]-L[0],L[3]-L[1]])
                w=np.inner(u,v)
                n=LA.norm(u)*LA.norm(v)
                c=w/n
                a=np.rad2deg(np.arccos(np.clip(c,-1.0,1.0)))
                if (a&gt;1)and(a&lt;90):
                    LIST_ang_2[count].append(a)
            elif(x3==[0,0]):
                u=np.array([Xi[2]-Xi[0],Xi[3]-Xi[1]])
                v=np.array([L[0]-L[2],L[1]-L[3]])
                w=np.inner(u,v)
                n=LA.norm(u)*LA.norm(v)
                c=w/n
                a=np.rad2deg(np.arccos(np.clip(c,-1.0,1.0)))
                if (a&gt;1)and(a&lt;90):
                    LIST_ang_2[count].append(a)
            elif(x4==[0,0]):
                u=np.array([Xi[0]-Xi[2],Xi[1]-Xi[3]])
                v=np.array([L[0]-L[2],L[1]-L[3]])
                w=np.inner(u,v)
                n=LA.norm(u)*LA.norm(v)
                c=w/n
                a=np.rad2deg(np.arccos(np.clip(c,-1.0,1.0)))
                if (a&gt;1)and(a&lt;90):
                    LIST_ang_2[count].append(a)
        LIST_ang[count].append(X[i])

def f():
    count=0 #繰り返しの回数のカウント
    ln=1000 #交点の数の比較用
    ln2=0   #辺の一致の比較
    tmp=100 #差の比較
    #count1=0
    va=10 #分散の比較
    #角度比較
    tmp_ang_max=0
    for i in range(len(B)):
        for j in range(len(C)):
            for k in range(len(D)):
                for l in range(len(E)):
                    a=0
                    b=0
                    LIST.append([])
                    output_Intersection(A,B[i],count)
                    output_Intersection(A,C[j],count)
                    output_Intersection(A,D[k],count)
                    output_Intersection(A,E[l],count)
                    output_Intersection(B[i],C[j],count)
                    output_Intersection(B[i],D[k],count)
                    output_Intersection(B[i],E[l],count)
                    output_Intersection(C[j],D[k],count)
                    output_Intersection(C[j],E[l],count)
                    output_Intersection(D[k],E[l],count)
                    #交点数の最小のものを見つける
                    if len(LIST[count])&lt;ln:
                        ln=len(LIST[count])
                        i1,j1,k1,l1=i,j,k,l
                        a=1
                    elif len(LIST[count])==ln:
                        a=1

                    LIST2.append([])
                    #分散計算のための準備
                    list=[0,0,0,0,0,0]
                    var(B[i],list)
                    var(C[j],list)
                    var(D[k],list)
                    var(E[l],list)

                    LIST4.append([])
                    orime2(B[i],count,list)
                    orime2(C[j],count,list)
                    orime2(D[k],count,list)
                    orime2(E[l],count,list)

                    LIST_ang.append([])
                    LIST_ang_2.append([])
                    for o in range(len(A)):
                        LIST_ang[count].append(A[o])
                    ang(B[i],count)
                    ang(C[j],count)
                    ang(D[k],count)
                    ang(E[l],count)

                    #辺の一致が多いものを見つける
                    if len(LIST2[count])&gt;ln2:
                        ln2=len(LIST2[count])
                        count2=count
                        i2,j2,k2,l2=i,j,k,l
                        b=1
                    if len(LIST2[count])==ln2:
                        b=1
                    tmp1=len(LIST[count])-len(LIST2[count])
                    print(&quot;count=&quot;,count)
                    print(i,j,k,l)
                    print(&quot;交点数&quot;,len(LIST[count]),&quot;共有折り線&quot;,len(LIST2[count]),&quot;差&quot;,tmp1)

                    sum=0
                    for o in range(len(list)):
                        sum=sum+list[o]
                    sum2=0
                    ma=0
                    mi=10
                    for o in range(len(list)):
                        sum2=sum2+(list[o]-sum/6)*(list[o]-sum/6)
                        if ma&lt;list[o]:
                            ma=list[o]
                        if mi&gt;list[o]:
                            mi=list[o]
                    LIST3.append([round(sum/6,3),round(sum2/6,3),ma-mi])

                    tmp_ang=1000
                    for o in range(len(LIST_ang_2[count])):
                        if LIST_ang_2[count][o]&lt;tmp_ang:
                            tmp_ang=LIST_ang_2[count][o]
                    LIST5.append(tmp_ang)

                    print(&quot;折り線配置&quot;,list)
                    print(&quot;平均，分散，max-min&quot;,LIST3[count])
                    print(&quot;角度(辺長)最小値&quot;,tmp_ang)

                    if a==1:
                        print(&quot;===== ========== =====交点数の最小候補===== ========== =====&quot;)
                        print(len(LIST[count]))
                    if b==1:
                        print(&quot;===== ========== =====共有折り線の最大候補===== ========== =====&quot;)
                        print(len(LIST2[count]))
                    if tmp1&lt;tmp:
                        tmp=tmp1
                        i3,j3,k3,l3=i,j,k,l
                        count1=count
                        print(&quot;===== ========== =====「交点数-共有折り線」の最小候補===== ========== =====&quot;)
                        print(tmp1)
                    elif tmp==tmp1:
                        print(&quot;===== ========== =====「交点数-共有折り線」の最小候補===== ========== =====&quot;)
                        print(tmp1)
                    if LIST3[count][1]&lt;va:
                        va=LIST3[count][1]
                        print(&quot;===== ========== =====分散最小候補===== ========== =====&quot;)
                        print(LIST3[count][1])
                    elif LIST3[count][1]==va:
                        print(&quot;===== ========== =====分散最小候補===== ========== =====&quot;)
                        print(LIST3[count][1])
                    if tmp_ang&gt;=tmp_ang_max:
                        print(&quot;===== ========== =====角度最大候補===== ========== =====&quot;)
                        print(tmp_ang,count)
                        tmp_ang_max=tmp_ang
                    print(&quot; &quot;)  #みやすさのため

                    count=count+1
                    #draw(i,j,k,l,count)

#描画
def draw(i1,j1,k1,l1,co):
    fig = plt.figure(figsize = (6, 8))
    ax = fig.add_subplot(111)
    #ax.grid()
    ax.set_xlim([-0.1,3.1])
    ax.set_ylim([-0.1,4.1])
    ax.plot([0,0],[2,3], color = &quot;black&quot;)
    ax.plot([1,1],[0,2], color = &quot;black&quot;)
    ax.plot([1,1],[3,4], color = &quot;black&quot;)
    ax.plot([2,2],[0,2], color = &quot;black&quot;)
    ax.plot([2,2],[3,4], color = &quot;black&quot;)
    ax.plot([3,3],[2,3], color = &quot;black&quot;)
    ax.plot([1,2],[0,0], color = &quot;black&quot;)
    ax.plot([0,1],[2,2], color = &quot;black&quot;)
    ax.plot([2,3],[2,2], color = &quot;black&quot;)
    ax.plot([0,1],[3,3], color = &quot;black&quot;)
    ax.plot([2,3],[3,3], color = &quot;black&quot;)
    ax.plot([1,2],[4,4], color = &quot;black&quot;)
    for i in range(len(A)):
        ax.plot([A[i][0],A[i][2]],[A[i][1],A[i][3]], color = &quot;sienna&quot;)
    B1=B[i1]
    for i in range(len(B1)):
        ax.plot([B1[i][0],B1[i][2]],[B1[i][1],B1[i][3]], color = &quot;red&quot;)
    C1=C[j1]
    for i in range(len(C1)):
        ax.plot([C1[i][0],C1[i][2]],[C1[i][1],C1[i][3]], color = &quot;green&quot;)
    D1=D[k1]
    for i in range(len(D1)):
        ax.plot([D1[i][0],D1[i][2]],[D1[i][1],D1[i][3]], color = &quot;blue&quot;)
    E1=E[l1]
    for i in range(len(E1)):
        ax.plot([E1[i][0],E1[i][2]],[E1[i][1],E1[i][3]], color = &quot;yellow&quot;)
    #
    plt.show()
    #画像保存するときのみコメントアウトを外す
    #fig.savefig(&quot;%03.f&quot;%(co)+&quot;.jpg&quot;)

#実行

f()


#texで表を描くために．
g=open(&#039;myfile.txt&#039;,&#039;w&#039;)
count=0
for i in range(len(B)):
    for j in range(len(C)):
        for k in range(len(D)):
            for l in range(len(E)):
                data1=len(LIST[count])
                data2=len(LIST2[count])
                data3=LIST3[count]
                data4=LIST5[count]
                g.write(&#039;%1.f &#039;%(i))
                g.write(&#039;~&#039;)
                g.write(&#039;%1.f &#039;%(j))
                g.write(&#039;~&#039;)
                g.write(&#039;%1.f &#039;%(k))
                g.write(&#039;~&#039;)
                g.write(&#039;%1.f &#039;%(l))
                g.write(&#039;&amp; &#039;)
                g.write(&#039;%02.f &#039;%(data1))
                g.write(&#039;&amp; &#039;)
                g.write(&#039;%02.f &#039;%(data2))
                g.write(&#039;&amp; &#039;)
                g.write(&#039;%02.f &#039;%(data1-data2))
                g.write(&#039;&amp; &#039;)
                g.write(&#039;%8.3f &#039;%(data3[0]))
                g.write(&#039;&amp; &#039;)
                g.write(&#039;%8.3f &#039;%(data3[1]))
                g.write(&#039;&amp; &#039;)
                g.write(&#039;%01.f &#039;%(data3[2]))
                g.write(&#039;&amp; &#039;)
                g.write(&#039;%8.3f &#039;%(data4))
                g.write(&#039;\\\ \hline&#039;)
                g.write(&#039;\n&#039;)
                count=count+1
g.close()
</pre></code>
				</div>
			</article>
		</section>
	</div><!-- / content -->


</div>
<!-- / wrapper -->

<footer id="footer">
	<p id="copyright">Copyright &copy; Sample Company All rights Reserved. Design by <a href="http://f-tpl.com" target="_blank" rel="nofollow">http://f-tpl.com</a>
</footer>
<!-- / footer -->

</body>
</html>
