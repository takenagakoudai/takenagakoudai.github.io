<!DOCTYPE html>
<html dir="ltr" lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, user-scalable=yes, maximum-scale=1.0, minimum-scale=1.0">
<title>subpage</title>
<meta name="keywords" content="">
<meta name="description" content="">
<link rel="stylesheet" href="style.css" type="text/css" media="screen">
<!--[if lt IE 9]>
<script src="js/html5.js"></script>
<script src="js/css3-mediaqueries.js"></script>
<![endif]-->
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
<script src="js/jquery1.7.2.min.js"></script>
<script src="js/script.js"></script>
</head>
<body>

<header id="header" role="banner">
	<div class="inner">
		<h1>九州大学　理学部　数学科</h1>
		<h2><a href="index.html">竹永　耕大　のHP</a></h2>
	</div>
</header>

<nav id="mainNav">
	<div class="inner">
		<a class="menu" id="menu"><span>MENU</span></a>
		<div class="panel">
			<ul>
				<li><a href="sub_univ.html"><strong>大学での成果</strong><span>university</span></a></li>
				<li><a href="sub_math.html"><strong>数学と日常</strong><span>math and everydy</span></a></li>
				<li><a href="sub_past.html"><strong>　過去問　</strong><span>past paper</span></a></li>
				<li><a href="sub_prob.html"><strong>その他問題集</strong><span>problems</span></a></li>
				<li><a href="sub_info.html"><strong>　情報　</strong><span>information</span></a></li>
				<li><a href="sub_othe.html"><strong>　その他　</strong><span>others</span></a>
					<ul class="sub-menu">
						<li><a href="https://www.skaji.org">鍛冶先生HP</a></li>
						<li><a href="https://ryokawai-github.github.io/website/">河井さんHP</a></li>
						<li><a >あはは</a></li>
					</ul>
				</li>
			</ul>
		</div>
	</div>
</nav>

<div id="wrapper">

	<div id="content2">
		<section>
			<article class="content2">
				<header>
					<h2 class="title first"><span>目次</span></h2>
				</header>
				<div class="post">
					セミナーで発表を行なった，単頂点の平坦折可能性問題の判定プログラムです．
					<h3>ソースコード</h3>
<pre><code class="prettyprint linenums">
	#内角の和が360度以下の単頂点展開図平坦折り可能性判定
	#隣接する角度は異なるとする．
	import numpy as np

	#グローバル
	C=[]       #折り目(1or2)
	THETA=[]   #角度列(theta &gt; 0)
	LIST=[]    #極小角の保持
	REST=[]    #残っている角度 1, 消滅した角度 0

	#スキャン関数 Nを返す   O(n)
	def scan():
	    print(&quot;N=?&quot;)
	    N=input()
	    N=int(N)
	    print(&quot;THETA=?&quot;)
	    for i in range(N):
	        a=input()
	        THETA.append(int(a))
	    print(&quot;C=? (折り目 山:1 谷:2)&quot;)
	    for i in range(N):
	        a=input()
	        C.append(int(a))
	    print(&quot;入力終了&quot;)
	    for i in range(N):
	        REST.append(1)
	    return N

	#川崎定理の条件確認　条件満たすとき:1, 満たさないとき:0　を返す．   O(n)
	def kawasaki(N):
	    #Nが偶数か否か
	    if N%2!=0:
	        return 0
	    tmp=0
	    tmp1=0
	    #交代和の確認
	    for i in range(N):  #i=2からN+1までの反復
	        if i%2==0:
	            tmp=tmp+THETA[i]
	        else:
	            tmp1=tmp1+THETA[i]
	    if tmp-tmp1==0:
	        return 1
	    else:
	        return 0

	#前川定理の確認　条件満たすとき:1 満たさないとき:0　を返す．(なんとなく作ってみた)  O(n)
	def maekawa(N):
	    tmp=0
	    for i in range(N):
	        if C[0]==C[i]:
	            tmp=tmp+1
	    tmp1=N-tmp
	    if abs(tmp1-tmp)==2:
	        return 1
	    else:
	        return 0

	#与えられた角度の右側の角度と折り目,番号を返す   O(n)-&gt;O(1)にしたい
	def right(k,N):
	    #残っている角度を探す
	    while(1):
	        k=np.mod(k+1,N)
	        if REST[k]==1:
	            break
	    return THETA[k],C[k],k

	#与えられた角度の左側の角度と折り目,番号を返す   O(n)-&gt;O(1)にしたい
	def left(k,N):
	    #残っている角度を探す
	    while(1):
	        k=np.mod(k-1,N)
	        if REST[k]==1:
	            break
	    return THETA[k],C[k],k

	#極小かつ折り目逆の判定  段おり可能なとき:1 不可能なとき:0　を返す  O(1)
	def possibility(k,N):
	    #対象角の前後の角度，折り目を取る
	    T0,C0,i=left(k,N)
	    T1,C1,j=right(k,N)
	    #極小かつ折り目逆の検証
	    if (T0&gt;=THETA[k]&lt;=T1)and(C[k]!=C1):
	        return 1
	    else:
	        return 0

	#極小角のリスト初期化 (保持は番号で)  O(n)
	def init_min_angle(N):
	    for i in range(N):
	        if possibility(i,N)==1:
	            LIST.append(i)

	#kで段折り    O(1)
	def step(k,N):
	    #対象角の前後の角度，折り目を取る
	    T0,C0,i=left(k,N)
	    T1,C1,j=right(k,N)
	    if i==j:      #角が2つになったらbreak(全ての角が同じ時に有効)
	        return 1
	    #角度と折り目の更新
	    THETA[k]=T0+T1-THETA[k]
	    C[k+1]=C[np.mod(j+1,N)]
	    C[k]=C0
	    #なくなった角度の消去
	    REST[i]=0
	    REST[j]=0
	    #段おりの結果出来る角と，隣接する角が段おり可能か検証
	    if possibility(k,N)==1:
	        LIST.append(k)
	    if possibility(np.mod(i-1,N),N)==1:
	        LIST.append(i-1)
	    if possibility(np.mod(j+1,N),N)==1:
	        LIST.append(j+1)
	    return 0

	#まとめる 段おり可能or不可能　をprintする
	def judgement():
	    N=scan()
	    #STEP1:川崎定理の確認
	    if kawasaki(N)==0:
	        print(&quot;段折り不可能&quot;)
	        return 0
	    #STEP2:極小角のうち折り目逆のものをリストに保存
	    init_min_angle(N)
	    #STEP3:順に取り出して段折り
	    while len(LIST)&gt;0:
	        a=LIST.pop(0)
	        if REST[a]==0:
	            continue
	        l=step(a,N)
	        if l==1:
	            break
	    b=np.sum(REST)
	    #リストが空になったら折り線が0or2本を確認
	    if b&gt;2:
	        print(&quot;段折り不可能&quot;)
	        return 0
	    elif N==0:
	        print(&quot;段折り可能&quot;)
	        return 0
	    #折り線が2本の時は同じ折り目かチェック
	    else:
	        TMP1=[]
	        TMP2=[]
	        print(REST)
	        for i in range(N):
	            if REST[i]==1:
	                TMP1.append(THETA[i])
	                TMP2.append(C[i])
	        if TMP1[0]==TMP1[1] and TMP2[0]==TMP2[1]:
	            print(&quot;段折り可能&quot;)
	            return 0
	#====実行

	if __name__==&quot;__main__&quot;:
	    judgement()

	#===
</pre></code>
				</div>
			</article>
		</section>
	</div><!-- / content -->


</div>
<!-- / wrapper -->

<footer id="footer">
	<p id="copyright">Copyright &copy; Sample Company All rights Reserved. Design by <a href="http://f-tpl.com" target="_blank" rel="nofollow">http://f-tpl.com</a>
</footer>
<!-- / footer -->

</body>
</html>
